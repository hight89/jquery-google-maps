!function(t){function e(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){o(1),t.exports=o(5)},function(t,e,o){o(2),window.CustomMarker=o(3),window.GoogleMaps=o(4)},function(t,e){google.maps.Polygon.prototype.getBounds=function(){var t=new google.maps.LatLngBounds;return this.getPath().forEach(function(e,o){t.extend(e)}),t},google.maps.Polygon.prototype.getApproximateCenter=function(){var t,e,o,n,a=0,i=1,s=this.getBounds(),r=0;if(t=s.getCenter(),google.maps.geometry.poly.containsLocation(t,this))return t;for(e=5,o=new google.maps.LatLng(s.getNorthEast().lat(),s.getSouthWest().lng()),a=google.maps.geometry.spherical.computeDistanceBetween(o,s.getSouthWest())/10,r=google.maps.geometry.spherical.computeDistanceBetween(o,s.getNorthEast())/10;i<=e&&(n=google.maps.geometry.spherical.computeOffset(t,a*i,0),!google.maps.geometry.poly.containsLocation(n,this))&&(n=google.maps.geometry.spherical.computeOffset(t,r*i,90),!google.maps.geometry.poly.containsLocation(n,this))&&(n=google.maps.geometry.spherical.computeOffset(t,a*i,180),!google.maps.geometry.poly.containsLocation(n,this))&&(n=google.maps.geometry.spherical.computeOffset(t,r*i,270),!google.maps.geometry.poly.containsLocation(n,this));i++);return n}},function(t,e){function o(t,e,o){this.latlng=t,this.options=o,this.setMap(e)}(o.prototype=new google.maps.OverlayView).draw=function(){var t=this,e=this.div;if(!e){e=this.div=document.createElement("div"),$(e).css({position:"absolute",top:0,left:0}).html(t.options.content),void 0!==t.options.id&&$(e).attr("id",t.options.id),void 0!==t.options.class&&$(e).addClass(t.options.class),google.maps.event.addDomListener(e,"click",function(e){google.maps.event.trigger(t,"click")});this.getPanes().overlayImage.appendChild(e)}var o=this.getProjection().fromLatLngToDivPixel(this.latlng);o&&(e.style.left=o.x+"px",e.style.top=o.y+"px")},o.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},o.prototype.getPosition=function(){return this.latlng},t.exports=o},function(t,e){function o(t){var e=this;if(this.options=t,this.options.latlng=void 0!==t.latlng?t.latlng:{lat:47.1556941,lng:18.3847734},this.options.hideCustomMarkers=void 0!==t.hideCustomMarkers&&t.hideCustomMarkers,this.options.fullscreenControl=void 0!==t.fullscreenControl&&t.fullscreenControl,this.options.streetViewControl=void 0!==t.streetViewControl&&t.streetViewControl,this.options.gestureHandling=void 0!==t.gestureHandling?t.gestureHandling:"cooperative",this.options.printable=void 0!==t.printable&&t.printable,this.options.locationable=void 0!==t.locationable&&t.locationable,this.options.streetviewable=void 0!==t.streetviewable&&t.streetviewable,this.bounds=new google.maps.LatLngBounds,this.objects={customMarkers:[],polygons:[],markers:{places:[],location:[]},customDraws:[],heatmap:[]},this.markerCluster={},this.drawingManager=null,this.panorama=null,this.map=new google.maps.Map($(this.options.div)[0],{center:this.options.latlng,zoom:this.options.zoom||8,mapTypeId:this.options.type||"hybrid",fullscreenControl:this.options.fullscreenControl,streetViewControl:this.options.streetViewControl,gestureHandling:this.options.gestureHandling}),this.options.printable){var o=$('<div class="btn-gmaps margin-right-10" id="map-print"><i class="fa fa-print"></i></div>');$(this.options.div).prepend(o),this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(o[0]),google.maps.event.addDomListener(o[0],"click",function(t){e.print()})}if(this.options.locationable){var n=$('<div class="btn-gmaps margin-right-10 margin-bottom-10" id="map-location"><i class="fa fa-location-arrow"></i></div>');$(this.options.div).prepend(n),this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(n[0]),google.maps.event.addDomListener(n[0],"click",function(t){e.showLocation()})}if(this.options.streetviewable){var a=$('<div class="btn-gmaps margin-bottom-10 margin-right-10" id="map-street-view"><i class="fa fa-street-view"></i></div>');$(this.options.div).prepend(a),this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(a[0]),google.maps.event.addDomListener(a[0],"click",function(t){e.toggleStreetView()}),e.setPanorama()}google.maps.event.addListener(this.map,"zoom_changed",function(t){e.options.hideCustomMarkers&&(e.map.zoom<=11?e.hideCustomMarkers():e.map.zoom>=12&&e.showCustomMarkers())}),$.extend(this.options,t)}o.prototype.setPanorama=function(t){t=t||this.options.latlng,this.panorama=this.map.getStreetView(),this.panorama.setPosition(t),this.panorama.setPov({heading:265,pitch:0})},o.prototype.toggleStreetView=function(){console.log("toggleStreetView");this.panorama.setVisible(!this.panorama.getVisible())},o.prototype.showLocation=function(){console.log("ShowLocation");var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t.resetObject(t.objects.markers.location);var o={lat:e.coords.latitude,lng:e.coords.longitude};t.addMarker(o,{to:"markers.location",infoWindow:"<b>("+o.lat+","+o.lng+")</b>"}),t.fitZoom(),console.log("success",o)},function(t){console.log("error",t)}):console.log("Geolocation is not supported by this browser.")},o.prototype.print=function(){console.log("print");var t=$("body"),e=$(this.options.div),o=e.parent(),n=$('<div style="position: relative;">');n.height(e.height()).append(e).prependTo(t);var a=t.children().not(n).not("script").detach(),i=$('<style media="print">').text('img { max-width: none !important; }a[href]:after { content: ""; }.btn-gmaps { display: none !important; }'+this.options.div+" { width: 100%; height: 100%; }").appendTo("head");window.print(),t.prepend(a),o.prepend(e),n.remove(),i.remove()},o.prototype.getRandomPoint=function(t){for(var e=new google.maps.Polygon({paths:t}),o=new google.maps.LatLngBounds,n=0;n<e.getPath().getLength();n++)o.extend(e.getPath().getAt(n));var a=o.getSouthWest(),i=o.getNorthEast();do{var s=Math.random()*(i.lat()-a.lat())+a.lat(),r=Math.random()*(i.lng()-a.lng())+a.lng(),l=new google.maps.LatLng(s,r)}while(!google.maps.geometry.poly.containsLocation(l,e));return l},o.prototype.getSize=function(t){return google.maps.geometry.spherical.computeArea(t.getPath())},o.prototype.setSizeInput=function(t){var e=parseInt(t/1e4);$("[name=size]").length&&$("[name=size]").val(e)},o.prototype.resetSizeInput=function(){this.setSizeInput(null)},o.prototype.setLocation=function(){console.log("setLocation");var t=this;navigator.geolocation?(t.resetDrawingManager(),navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude};t.addMarker(o,{to:"customDraws",draggable:!0}),t.addDrawingManager({drawingModes:["marker"],drawingControl:!1}),$('[name="lat"]').length&&$('[name="lat"]').val(o.lat),$('[name="lng"]').length&&$('[name="lng"]').val(o.lng),console.log("success",o)},function(e){console.log("error",e),t.addDrawingManager({drawingModes:["marker"],drawingControl:!0})})):console.log("Geolocation is not supported by this browser.")},o.prototype.geocode=function(t,e){(new google.maps.Geocoder).geocode({address:t},function(t,o){if(o==google.maps.GeocoderStatus.OK)return"function"==typeof e&&e(t[0].geometry.location),t[0].geometry.location})},o.prototype.setCenter=function(t){this.map.setCenter(t)},o.prototype.fitZoom=function(){this.map.fitBounds(this.bounds)},o.prototype.setZoom=function(t){this.map.setZoom(t)},o.prototype.coordinates2paths=function(t){var e=t;if(void 0===t[0].lat){if(!Array.isArray(t[0]))return{lat:Number(t[0]),lng:Number(t[1])};e=[],$.each(t,function(t,o){e.push({lat:Number(o[0]),lng:Number(o[1])})})}return e},o.prototype.push2object=function(t,e){this.walkObject(this.objects,t).push(e)},o.prototype.walkObject=function(t,e){return e.split(".").reduce(function(t,e){return t[e]},t)},o.prototype.addHeatmap=function(t){var e=this,o=[],n=e.coordinates2paths(t);$.each(n,function(t,n){latlng=new google.maps.LatLng(n.lat,n.lng),o.push(latlng),e.bounds.extend(latlng)});var a=new google.maps.visualization.HeatmapLayer({data:o,map:e.map});this.push2object("heatmap",a)},o.prototype.addMarker=function(t,e){var o=this;if(void 0===t.lat)t=o.coordinates2paths(t);if(t.length>1){var n=o.coordinates2paths(t);t=new google.maps.Polygon({paths:n}).getApproximateCenter()}if(void 0!==t.lat&&void 0!==t.lng){if((e=e||{}).to=e.to||"markers.places",void 0!==e.icon&&null!==e.icon)var a={url:e.icon};var i=new google.maps.Marker({position:t,map:this.map,draggable:e.draggable||!1,icon:void 0!==a?a:""});this.push2object(e.to,i),this.bounds.extend(t),void 0!==e.infoWindow&&this.addInfoWindow(i,{content:e.infoWindow})}return o.addMarkerEvents(i),i},o.prototype.addMarkerEvents=function(t){var e=this;google.maps.event.addListener(t,"dragend",function(o){e.setDrawingManagerInput(t.getPosition(),t.getPosition().lat(),t.getPosition().lng())})},o.prototype.addPolygon=function(t,e){var o=this;(e=e||{}).to=e.to||"polygons",e.bounds=void 0===e.bounds||e.bounds;var n=this.coordinates2paths(t),a=new google.maps.Polygon({paths:n,strokeColor:e.strokeColor||"#1ab394",strokeOpacity:e.strokeOpacity||.8,strokeWeight:e.strokeWeight||2,fillColor:e.fillColor||"#1ab394",fillOpacity:e.fillOpacity||.35,draggable:e.draggable||!1,editable:e.editable||!1});if(a.setMap(this.map),this.push2object(e.to,a),e.bounds&&$.each(n,function(t,e){o.bounds.extend(e)}),void 0!==e.label){var i=new CustomMarker(a.getApproximateCenter(),this.map,{content:e.label});this.objects.customMarkers.push(i)}return void 0!==e.infoWindow&&this.addInfoWindow(a,{content:e.infoWindow}),o.addPolygonEvents(a),a},o.prototype.addPolygonEvents=function(t){var e=this,o=t.fillOpacity;google.maps.event.addListener(t,"mouseover",function(t){this.setOptions({fillOpacity:.2})}),google.maps.event.addListener(t,"mouseout",function(t){this.setOptions({fillOpacity:o})}),t.getPaths().forEach(function(o,n){google.maps.event.addListener(o,"insert_at",function(){e.setDrawingManagerInput(t.getPath().getArray());var o=e.getSize(t);e.setSizeInput(o)}),google.maps.event.addListener(o,"remove_at",function(){e.setDrawingManagerInput(t.getPath().getArray());var o=e.getSize(t);e.setSizeInput(o)}),google.maps.event.addListener(o,"set_at",function(){e.setDrawingManagerInput(t.getPath().getArray());var o=e.getSize(t);e.setSizeInput(o)})})},o.prototype.addInfoWindow=function(t,e){void 0!==(e=e||{}).content&&(t.info=new google.maps.InfoWindow({content:e.content}),google.maps.event.addListener(t,"click",function(e){t.info.setPosition(e.latLng),t.info.open(this.map,t)}))},o.prototype.addMarkerCluster=function(t){var e=this;$.each(this.objects.markers,function(o,n){e.markerCluster[o]=new MarkerClusterer(e.map,n,{imagePath:t||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",maxZoom:13})})},o.prototype.addDrawingManager=function(t){(t=t||{}).drawingModes=t.drawingModes||["marker","polygon"];var e={};(index=t.drawingModes.indexOf("polyline-arrow"))>=0&&(t.drawingModes.splice(index,1),(index=t.drawingModes.indexOf("polyline"))<0&&t.drawingModes.push("polyline"),e={icons:[{icon:{path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW},offset:"100%"}]}),drawingManager=this.drawingManager=new google.maps.drawing.DrawingManager({drawingMode:t.drawingModes[0],drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:t.drawingModes},markerOptions:{draggable:!0,icon:t.icon||"https://maps.google.com/mapfiles/ms/micons/red.png"},polygonOptions:{strokeColor:t.strokeColor||"#F75C54",strokeOpacity:.9,strokeWeight:2,fillColor:t.fillColor||"#F75C54",fillOpacity:.35,editable:!0,draggable:t.draggable||!1,zIndex:1},polylineOptions:Object.assign({strokeColor:t.strokeColor||"#F75C54",strokeOpacity:.9,strokeWeight:2},e)}),drawingManager.setMap(this.map),$("#draw-reset").remove(),$('[name="coordinates"]').length&&$('[name="coordinates"]').remove(),$('[name="lat"]').length&&$('[name="lat"]').remove(),$('[name="lng"]').length&&$('[name="lng"]').remove(),$(this.options.div).prepend('<input type="hidden" name="coordinates" class="absolute top-5 right-5 z-index-1">'),$(this.options.div).prepend('<input type="hidden" name="lat" class="absolute top-5 right-5 z-index-1">'),$(this.options.div).prepend('<input type="hidden" name="lng" class="absolute top-5 right-5 z-index-1">'),$reset=$('<div class="btn-gmaps margin-top-10" id="draw-reset"><i class="fa fa-trash-o"></i></div>'),$(this.options.div).prepend($reset),this.map.controls[google.maps.ControlPosition.TOP_CENTER].push($reset[0]),$reset.hide(),void 0===t.drawingControl||t.drawingControl||(drawingManager.setDrawingMode(null),drawingManager.setMap(null),$reset.show()),this.addDrawingManagerEvents(drawingManager,$reset)},o.prototype.addDrawingManagerEvents=function(t,e){var o=this;google.maps.event.addListener(t,"overlaycomplete",function(n){var a=n.overlay;if(o.objects.customDraws.push(a),t.setDrawingMode(null),t.setMap(null),e.show(),"function"==typeof a.getPaths){o.setDrawingManagerInput(a.getPath().getArray()),o.addPolygonEvents(a);var i=o.getSize(a);o.setSizeInput(i)}else"function"==typeof a.getPath?o.setDrawingManagerInput(a.getPath().getArray()):"function"==typeof a.getPosition&&(o.setDrawingManagerInput(a.getPosition(),a.getPosition().lat(),a.getPosition().lng()),o.addMarkerEvents(a))}),google.maps.event.addDomListener(e[0],"click",function(n){$.each(o.objects.customDraws,function(t,e){e.setMap(null)}),e.hide(),o.resetSizeInput(),o.resetDrawingManagerInput(),t.setDrawingMode(t.drawingControlOptions.drawingModes[0]),t.setMap(o.map)})},o.prototype.setDrawingManagerInput=function(t,e,o){var e=e||null,o=o||null;$('[name="coordinates"]').length&&$(this.options.div).find('[name="coordinates"]').val(t),$('[name="lat"]').length&&$('[name="lat"]').val(e),$('[name="lng"]').length&&$('[name="lng"]').val(o),$('[name="long"]').length&&$('[name="long"]').val(o),$.session.set("coordinates",t)},o.prototype.reset=function(t){var e=this;(t=t||null)?$.each(t,function(t,o){var n=e.walkObject(e.objects,o);n&&(e.resetObject(n),e.objects[o]=[])}):(e.markerCluster.places&&e.markerCluster.places.clearMarkers(),e.markerCluster.events&&e.markerCluster.events.clearMarkers(),e.markerCluster.location&&e.markerCluster.location.clearMarkers(),this.resetObject(e.objects.customMarkers),this.resetObject(e.objects.customDraws),this.resetObject(e.objects.polygons),this.resetObject(e.objects.markers.places),this.resetObject(e.objects.markers.location),this.resetObject(e.objects.heatmap),e.objects={customMarkers:[],customDraws:[],polygons:[],markers:{places:[],location:[]},heatmap:[]})},o.prototype.resetObject=function(t){$.each(t,function(t,e){e.setMap(null)})},o.prototype.resetDrawingManager=function(){$(this.options.div).find("#draw-reset").remove(),null!==this.drawingManager&&(this.drawingManager.setMap(null),this.drawingManager=null),this.resetDrawingManagerInput()},o.prototype.resetDrawingManagerInput=function(){this.setDrawingManagerInput(null,null,null)},o.prototype.showCustomMarkers=function(){var t=this;$.each(this.objects.customMarkers,function(e,o){o.setMap(t.map)})},o.prototype.hideCustomMarkers=function(){$.each(this.objects.customMarkers,function(t,e){e.setMap(null)})},t.exports=o},function(t,e){}]);