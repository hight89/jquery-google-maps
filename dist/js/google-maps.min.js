!function(t){function o(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}var e={};o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},o.p="",o(o.s=0)}([function(t,o,e){e(1),t.exports=e(5)},function(t,o,e){e(2),window.CustomMarker=e(3),window.GoogleMaps=e(4)},function(t,o){google.maps.Polygon.prototype.getBounds=function(){var t=new google.maps.LatLngBounds;return this.getPath().forEach(function(o,e){t.extend(o)}),t},google.maps.Polygon.prototype.getApproximateCenter=function(){var t,o,e,n,a=0,i=1,s=this.getBounds(),r=0;if(t=s.getCenter(),google.maps.geometry.poly.containsLocation(t,this))return t;for(o=5,e=new google.maps.LatLng(s.getNorthEast().lat(),s.getSouthWest().lng()),a=google.maps.geometry.spherical.computeDistanceBetween(e,s.getSouthWest())/10,r=google.maps.geometry.spherical.computeDistanceBetween(e,s.getNorthEast())/10;i<=o&&(n=google.maps.geometry.spherical.computeOffset(t,a*i,0),!google.maps.geometry.poly.containsLocation(n,this))&&(n=google.maps.geometry.spherical.computeOffset(t,r*i,90),!google.maps.geometry.poly.containsLocation(n,this))&&(n=google.maps.geometry.spherical.computeOffset(t,a*i,180),!google.maps.geometry.poly.containsLocation(n,this))&&(n=google.maps.geometry.spherical.computeOffset(t,r*i,270),!google.maps.geometry.poly.containsLocation(n,this));i++);return n}},function(t,o){function e(t,o,e){this.latlng=t,this.options=e,this.setMap(o)}(e.prototype=new google.maps.OverlayView).draw=function(){var t=this,o=this.div;if(!o){o=this.div=document.createElement("div"),$(o).css({position:"absolute",top:0,left:0}).html(t.options.content),void 0!==t.options.id&&$(o).attr("id",t.options.id),void 0!==t.options.class&&$(o).addClass(t.options.class),google.maps.event.addDomListener(o,"click",function(o){google.maps.event.trigger(t,"click")});this.getPanes().overlayImage.appendChild(o)}var e=this.getProjection().fromLatLngToDivPixel(this.latlng);e&&(o.style.left=e.x+"px",o.style.top=e.y+"px")},e.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.getPosition=function(){return this.latlng},t.exports=e},function(t,o){function e(t){var o=this;if(this.options=t,this.options.latlng=void 0!==t.latlng?t.latlng:{lat:47.1556941,lng:18.3847734},this.options.hideCustomMarkers=void 0!==t.hideCustomMarkers&&t.hideCustomMarkers,this.options.fullscreenControl=void 0!==t.fullscreenControl&&t.fullscreenControl,this.options.streetViewControl=void 0!==t.streetViewControl&&t.streetViewControl,this.options.gestureHandling=void 0!==t.gestureHandling?t.gestureHandling:"cooperative",this.options.printable=void 0!==t.printable&&t.printable,this.options.locationable=void 0!==t.locationable&&t.locationable,this.options.streetviewable=void 0!==t.streetviewable&&t.streetviewable,this.bounds=new google.maps.LatLngBounds,this.objects={customMarkers:[],polygons:[],markers:{places:[],location:[]},customDraws:[],heatmap:[]},this.markerCluster={},this.drawingManager=null,this.panorama=null,this.map=new google.maps.Map($(this.options.div)[0],{center:this.options.latlng,zoom:this.options.zoom||8,mapTypeId:this.options.type||"hybrid",fullscreenControl:this.options.fullscreenControl,streetViewControl:this.options.streetViewControl,gestureHandling:this.options.gestureHandling}),this.options.printable){var e=$('<div class="btn-gmaps margin-right-10" id="map-print"><i class="fa fa-print"></i></div>');$(this.options.div).prepend(e),this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(e[0]),google.maps.event.addDomListener(e[0],"click",function(t){o.print()})}if(this.options.locationable){var n=$('<div class="btn-gmaps margin-right-10 margin-bottom-10" id="map-location"><i class="fa fa-location-arrow"></i></div>');$(this.options.div).prepend(n),this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(n[0]),google.maps.event.addDomListener(n[0],"click",function(t){o.showLocation()})}if(this.options.streetviewable){var a=$('<div class="btn-gmaps margin-bottom-10 margin-right-10" id="map-street-view"><i class="fa fa-street-view"></i></div>');$(this.options.div).prepend(a),this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(a[0]),google.maps.event.addDomListener(a[0],"click",function(t){o.toggleStreetView()}),o.setPanorama()}google.maps.event.addListener(this.map,"zoom_changed",function(t){o.options.hideCustomMarkers&&(o.map.zoom<=11?o.hideCustomMarkers():o.map.zoom>=12&&o.showCustomMarkers())}),$.extend(this.options,t)}e.prototype.setPanorama=function(t){t=t||this.options.latlng,this.panorama=this.map.getStreetView(),this.panorama.setPosition(t),this.panorama.setPov({heading:265,pitch:0})},e.prototype.toggleStreetView=function(){console.log("toggleStreetView");this.panorama.setVisible(!this.panorama.getVisible())},e.prototype.showLocation=function(){console.log("ShowLocation");var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(o){t.resetObject(t.objects.markers.location);var e={lat:o.coords.latitude,lng:o.coords.longitude};t.addMarker(e,{to:"markers.location",infoWindow:"<b>("+e.lat+","+e.lng+")</b>"}),t.fitZoom(),console.log("success",e)},function(t){console.log("error",t)}):console.log("Geolocation is not supported by this browser.")},e.prototype.print=function(){console.log("print");var t=$("body"),o=$(this.options.div),e=o.parent(),n=$('<div style="position: relative;">');n.height(o.height()).append(o).prependTo(t);var a=t.children().not(n).not("script").detach(),i=$('<style media="print">').text('img { max-width: none !important; }a[href]:after { content: ""; }.btn-gmaps { display: none !important; }'+this.options.div+" { width: 100%; height: 100%; }").appendTo("head");window.print(),t.prepend(a),e.prepend(o),n.remove(),i.remove()},e.prototype.getRandomPoint=function(t){for(var o=new google.maps.Polygon({paths:t}),e=new google.maps.LatLngBounds,n=0;n<o.getPath().getLength();n++)e.extend(o.getPath().getAt(n));var a=e.getSouthWest(),i=e.getNorthEast();do{var s=Math.random()*(i.lat()-a.lat())+a.lat(),r=Math.random()*(i.lng()-a.lng())+a.lng(),l=new google.maps.LatLng(s,r)}while(!google.maps.geometry.poly.containsLocation(l,o));return l},e.prototype.getSize=function(t){return google.maps.geometry.spherical.computeArea(t.getPath())},e.prototype.setSizeInput=function(t){var o=parseInt(t/1e4);$("[name=size]").length&&$("[name=size]").val(o)},e.prototype.resetSizeInput=function(){this.setSizeInput(null)},e.prototype.setLocation=function(){console.log("setLocation");var t=this;navigator.geolocation?(t.resetDrawingManager(),navigator.geolocation.getCurrentPosition(function(o){var e={lat:o.coords.latitude,lng:o.coords.longitude};t.addMarker(e,{to:"customDraws",draggable:!0}),t.addDrawingManager({drawingModes:["marker"],drawingControl:!1}),$("input[name=lat]").val(e.lat),$("input[name=lng]").val(e.lng),console.log("success",e)},function(o){console.log("error",o),t.addDrawingManager({drawingModes:["marker"],drawingControl:!0})})):console.log("Geolocation is not supported by this browser.")},e.prototype.geocode=function(t,o){(new google.maps.Geocoder).geocode({address:t},function(t,e){if(e==google.maps.GeocoderStatus.OK)return"function"==typeof o&&o(t[0].geometry.location),t[0].geometry.location})},e.prototype.setCenter=function(t){this.map.setCenter(t)},e.prototype.fitZoom=function(){this.map.fitBounds(this.bounds)},e.prototype.setZoom=function(t){this.map.setZoom(t)},e.prototype.coordinates2paths=function(t){var o=t;if(void 0===t[0].lat){if(!Array.isArray(t[0]))return{lat:Number(t[0]),lng:Number(t[1])};o=[],$.each(t,function(t,e){o.push({lat:Number(e[0]),lng:Number(e[1])})})}return o},e.prototype.push2object=function(t,o){this.walkObject(this.objects,t).push(o)},e.prototype.walkObject=function(t,o){return o.split(".").reduce(function(t,o){return t[o]},t)},e.prototype.addHeatmap=function(t){var o=this,e=[],n=o.coordinates2paths(t);$.each(n,function(t,n){latlng=new google.maps.LatLng(n.lat,n.lng),e.push(latlng),o.bounds.extend(latlng)});var a=new google.maps.visualization.HeatmapLayer({data:e,map:o.map});this.push2object("heatmap",a)},e.prototype.addMarker=function(t,o){var e=this;if(void 0===t.lat)t=e.coordinates2paths(t);if(t.length>1){var n=e.coordinates2paths(t);t=new google.maps.Polygon({paths:n}).getApproximateCenter()}if(void 0!==t.lat&&void 0!==t.lng){if((o=o||{}).to=o.to||"markers.places",void 0!==o.icon&&null!==o.icon)var a={url:o.icon};var i=new google.maps.Marker({position:t,map:this.map,draggable:o.draggable||!1,icon:void 0!==a?a:""});this.push2object(o.to,i),this.bounds.extend(t),void 0!==o.infoWindow&&this.addInfoWindow(i,{content:o.infoWindow})}return e.addMarkerEvents(i),i},e.prototype.addMarkerEvents=function(t){var o=this;google.maps.event.addListener(t,"dragend",function(e){o.setDrawingManagerInput(t.getPosition(),t.getPosition().lat(),t.getPosition().lng())})},e.prototype.addPolygon=function(t,o){var e=this;(o=o||{}).to=o.to||"polygons",o.bounds=void 0===o.bounds||o.bounds;var n=this.coordinates2paths(t),a=new google.maps.Polygon({paths:n,strokeColor:o.strokeColor||"#1ab394",strokeOpacity:o.strokeOpacity||.8,strokeWeight:o.strokeWeight||2,fillColor:o.fillColor||"#1ab394",fillOpacity:o.fillOpacity||.35,draggable:o.draggable||!1,editable:o.editable||!1});if(a.setMap(this.map),this.push2object(o.to,a),o.bounds&&$.each(n,function(t,o){e.bounds.extend(o)}),void 0!==o.label){var i=new CustomMarker(a.getApproximateCenter(),this.map,{content:o.label});this.objects.customMarkers.push(i)}return void 0!==o.infoWindow&&this.addInfoWindow(a,{content:o.infoWindow}),e.addPolygonEvents(a),a},e.prototype.addPolygonEvents=function(t){var o=this,e=t.fillOpacity;google.maps.event.addListener(t,"mouseover",function(t){this.setOptions({fillOpacity:.2})}),google.maps.event.addListener(t,"mouseout",function(t){this.setOptions({fillOpacity:e})}),t.getPaths().forEach(function(e,n){google.maps.event.addListener(e,"insert_at",function(){o.setDrawingManagerInput(t.getPath().getArray());var e=o.getSize(t);o.setSizeInput(e)}),google.maps.event.addListener(e,"remove_at",function(){o.setDrawingManagerInput(t.getPath().getArray());var e=o.getSize(t);o.setSizeInput(e)}),google.maps.event.addListener(e,"set_at",function(){o.setDrawingManagerInput(t.getPath().getArray());var e=o.getSize(t);o.setSizeInput(e)})})},e.prototype.addInfoWindow=function(t,o){void 0!==(o=o||{}).content&&(t.info=new google.maps.InfoWindow({content:o.content}),google.maps.event.addListener(t,"click",function(o){t.info.setPosition(o.latLng),t.info.open(this.map,t)}))},e.prototype.addMarkerCluster=function(t){var o=this;$.each(this.objects.markers,function(e,n){o.markerCluster[e]=new MarkerClusterer(o.map,n,{imagePath:t||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",maxZoom:13})})},e.prototype.addDrawingManager=function(t){(t=t||{}).drawingModes=t.drawingModes||["marker","polygon"],drawingManager=this.drawingManager=new google.maps.drawing.DrawingManager({drawingMode:t.drawingModes[0],drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:t.drawingModes},markerOptions:{draggable:!0,icon:t.icon||"https://maps.google.com/mapfiles/ms/micons/red.png"},polygonOptions:{strokeColor:t.strokeColor||"#F75C54",strokeOpacity:.9,strokeWeight:2,fillColor:t.fillColor||"#F75C54",fillOpacity:.35,editable:!0,draggable:t.draggable||!1,zIndex:1}}),drawingManager.setMap(this.map),$("#draw-reset").remove(),$('[name="coordinates"]').remove(),$(this.options.div).prepend('<input type="hidden" name="coordinates" class="absolute top-5 right-5 z-index-1">'),$reset=$('<div class="btn-gmaps margin-top-10" id="draw-reset"><i class="fa fa-trash-o"></i></div>'),$(this.options.div).prepend($reset),this.map.controls[google.maps.ControlPosition.TOP_CENTER].push($reset[0]),$reset.hide(),void 0===t.drawingControl||t.drawingControl||(drawingManager.setDrawingMode(null),drawingManager.setMap(null),$reset.show()),this.addDrawingManagerEvents(drawingManager,$reset)},e.prototype.addDrawingManagerEvents=function(t,o){var e=this;google.maps.event.addListener(t,"overlaycomplete",function(n){var a=n.overlay;if(e.objects.customDraws.push(a),t.setDrawingMode(null),t.setMap(null),o.show(),"function"==typeof a.getPath){e.setDrawingManagerInput(a.getPath().getArray()),e.addPolygonEvents(a);var i=e.getSize(a);e.setSizeInput(i)}else"function"==typeof a.getPosition&&(e.setDrawingManagerInput(a.getPosition(),a.getPosition().lat(),a.getPosition().lng()),e.addMarkerEvents(a))}),google.maps.event.addDomListener(o[0],"click",function(n){$.each(e.objects.customDraws,function(t,o){o.setMap(null)}),o.hide(),e.resetSizeInput(),e.resetDrawingManagerInput(),t.setDrawingMode(t.drawingControlOptions.drawingModes[0]),t.setMap(e.map)})},e.prototype.setDrawingManagerInput=function(t,o,e){var o=o||null,e=e||null;$(this.options.div).find("input[name=coordinates]").val(t),$("[name=lat]").length&&$("[name=lat]").val(o),$("[name=lng]").length&&$("[name=lng]").val(e),$("[name=long]").length&&$("[name=long]").val(e),$.session.set("coordinates",t)},e.prototype.reset=function(t){var o=this;(t=t||null)?$.each(t,function(t,e){var n=o.walkObject(o.objects,e);n&&(o.resetObject(n),o.objects[e]=[])}):(o.markerCluster.places&&o.markerCluster.places.clearMarkers(),o.markerCluster.events&&o.markerCluster.events.clearMarkers(),o.markerCluster.location&&o.markerCluster.location.clearMarkers(),this.resetObject(o.objects.customMarkers),this.resetObject(o.objects.customDraws),this.resetObject(o.objects.polygons),this.resetObject(o.objects.markers.places),this.resetObject(o.objects.markers.location),this.resetObject(o.objects.heatmap),o.objects={customMarkers:[],customDraws:[],polygons:[],markers:{places:[],location:[]},heatmap:[]})},e.prototype.resetObject=function(t){$.each(t,function(t,o){o.setMap(null)})},e.prototype.resetDrawingManager=function(){$(this.options.div).find("#draw-reset").remove(),null!==this.drawingManager&&(this.drawingManager.setMap(null),this.drawingManager=null),this.resetDrawingManagerInput()},e.prototype.resetDrawingManagerInput=function(){this.setDrawingManagerInput(null,null,null)},e.prototype.showCustomMarkers=function(){var t=this;$.each(this.objects.customMarkers,function(o,e){e.setMap(t.map)})},e.prototype.hideCustomMarkers=function(){$.each(this.objects.customMarkers,function(t,o){o.setMap(null)})},t.exports=e},function(t,o){}]);